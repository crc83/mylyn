<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>mylyn-parent</artifactId>
    <groupId>org.eclipse.mylyn</groupId>
    <version>3.6.5-SNAPSHOT</version>
  </parent>
  <groupId>org.eclipse.mylyn</groupId>
  <artifactId>process-test-results</artifactId>
  <version>3.6.5-SNAPSHOT</version>
  <packaging>pom</packaging>
  <build>
    <plugins>
	  <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>xml-maven-plugin</artifactId>
		<version>1.0-beta-3</version>
        <executions>
          <execution>
            <phase>post-integration-test</phase>
            <goals>
              <goal>transform</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <transformationSets>
			<!-- append @x.y.z to repository test cases to differentiate test fixtures -->
            <transformationSet>
              <dir>../../org.eclipse.mylyn.tests/target/surefire-reports</dir>
              <outputDir>../../org.eclipse.mylyn.tests/target/surefire-reports</outputDir>
			  <includes>
				<include>*.xml</include>
			  </includes>
			  <!-- map to different file extensions since overriding source
				   file does not work -->
			  <fileMappers>
                <fileMapper implementation="org.codehaus.plexus.components.io.filemappers.FileExtensionMapper">
                  <targetExtension>.tmp</targetExtension>
                </fileMapper>
              </fileMappers>
			  <stylesheet>../../org.eclipse.mylyn.releng/scripts/test-fixture.xsl</stylesheet>
            </transformationSet>
			<!-- append @ex.y to all test cases to differentiate target platform -->
            <transformationSet>
              <dir>../../org.eclipse.mylyn.tests/target/surefire-reports</dir>
              <outputDir>../../org.eclipse.mylyn.tests/target/surefire-reports</outputDir>
              <stylesheet>../../org.eclipse.mylyn.releng/scripts/test-suite.xsl</stylesheet>
			  <includes>
				<include>*.tmp</include>
			  </includes>
			  <fileMappers>
                <fileMapper implementation="org.codehaus.plexus.components.io.filemappers.FileExtensionMapper">
                  <targetExtension>.xml</targetExtension>
                </fileMapper>
              </fileMappers>
			  <!--
              <parameters>
                <parameter>
                  <name>append</name>
                  <value>${mylyn-test-append}</value>
                </parameter>
              </parameters>
			  -->
            </transformationSet>
          </transformationSets>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
